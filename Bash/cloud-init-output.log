Cloud-init v. 21.1-19-gbad84ad4-0ubuntu1~20.04.2 running 'init-local' at Tue, 15 Jun 2021 04:01:35 +0000. Up 6.83 seconds.
Cloud-init v. 21.1-19-gbad84ad4-0ubuntu1~20.04.2 running 'init' at Tue, 15 Jun 2021 04:01:38 +0000. Up 9.95 seconds.
ci-info: ++++++++++++++++++++++++++++++++++++++Net device info+++++++++++++++++++++++++++++++++++++++
ci-info: +--------+------+-----------------------------+---------------+--------+-------------------+
ci-info: | Device |  Up  |           Address           |      Mask     | Scope  |     Hw-Address    |
ci-info: +--------+------+-----------------------------+---------------+--------+-------------------+
ci-info: |  ens5  | True |          10.1.1.11          | 255.255.255.0 | global | 06:96:99:c5:1b:82 |
ci-info: |  ens5  | True | fe80::496:99ff:fec5:1b82/64 |       .       |  link  | 06:96:99:c5:1b:82 |
ci-info: |   lo   | True |          127.0.0.1          |   255.0.0.0   |  host  |         .         |
ci-info: |   lo   | True |           ::1/128           |       .       |  host  |         .         |
ci-info: +--------+------+-----------------------------+---------------+--------+-------------------+
ci-info: ++++++++++++++++++++++++++++Route IPv4 info+++++++++++++++++++++++++++++
ci-info: +-------+-------------+----------+-----------------+-----------+-------+
ci-info: | Route | Destination | Gateway  |     Genmask     | Interface | Flags |
ci-info: +-------+-------------+----------+-----------------+-----------+-------+
ci-info: |   0   |   0.0.0.0   | 10.1.1.1 |     0.0.0.0     |    ens5   |   UG  |
ci-info: |   1   |   10.1.1.0  | 0.0.0.0  |  255.255.255.0  |    ens5   |   U   |
ci-info: |   2   |   10.1.1.1  | 0.0.0.0  | 255.255.255.255 |    ens5   |   UH  |
ci-info: +-------+-------------+----------+-----------------+-----------+-------+
ci-info: +++++++++++++++++++Route IPv6 info+++++++++++++++++++
ci-info: +-------+-------------+---------+-----------+-------+
ci-info: | Route | Destination | Gateway | Interface | Flags |
ci-info: +-------+-------------+---------+-----------+-------+
ci-info: |   1   |  fe80::/64  |    ::   |    ens5   |   U   |
ci-info: |   3   |    local    |    ::   |    ens5   |   U   |
ci-info: |   4   |  multicast  |    ::   |    ens5   |   U   |
ci-info: +-------+-------------+---------+-----------+-------+
Generating public/private rsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_rsa_key
Your public key has been saved in /etc/ssh/ssh_host_rsa_key.pub
The key fingerprint is:
SHA256:/pTDK9rFfyKgXJkBbhRs/9GlDzgWvEV3XdRRrvXwO68 root@ip-10-1-1-11
The key's randomart image is:
+---[RSA 3072]----+
|     ... . .. .o@|
|      =   o ...oo|
|     + o   * o. o|
|      o o * +  =.|
|     .  S* o o. o|
|       .=o..  . .|
|     . o..B    o |
|      o..+.+. . o|
|      ....o..oE..|
+----[SHA256]-----+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub
The key fingerprint is:
SHA256:VfpLJjbHT/1bNL0pM/F/ThrVubRDfCpC9zdFtidSi6U root@ip-10-1-1-11
The key's randomart image is:
+---[DSA 1024]----+
|            .    |
|           o     |
|          o   o o|
|         . o =.==|
|        S = E.+BX|
|         o B *==@|
|          . o+=O=|
|           . .+=B|
|              .o+|
+----[SHA256]-----+
Generating public/private ecdsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_ecdsa_key
Your public key has been saved in /etc/ssh/ssh_host_ecdsa_key.pub
The key fingerprint is:
SHA256:eqmzLFwkrgDUBaiietflJPRAl1cKm4hRou4GzTrd6zE root@ip-10-1-1-11
The key's randomart image is:
+---[ECDSA 256]---+
|  o.=o. .. ..    |
| o o +..o+..     |
|o . ....o..      |
|++  . +          |
|= +. + oS        |
|o= .. o.+.       |
|+.+oEo.=o        |
|.oo +=oo.        |
| . oo.+o         |
+----[SHA256]-----+
Generating public/private ed25519 key pair.
Your identification has been saved in /etc/ssh/ssh_host_ed25519_key
Your public key has been saved in /etc/ssh/ssh_host_ed25519_key.pub
The key fingerprint is:
SHA256:+jIOmftCEHGSzZ/NMmVzEnGMIu4gyYOAUKNZX6seKZs root@ip-10-1-1-11
The key's randomart image is:
+--[ED25519 256]--+
|+.*=. . o=.      |
|o+o=+...*.o      |
|*. o.o.B +       |
|+oo .o= o        |
| .o++  oS        |
|   =o+ .         |
|  E.= .          |
|    .oo.         |
|    .+oo.        |
+----[SHA256]-----+
Cloud-init v. 21.1-19-gbad84ad4-0ubuntu1~20.04.2 running 'modules:config' at Tue, 15 Jun 2021 04:01:46 +0000. Up 17.83 seconds.
++ date +%Y%m%d%H%M%S
+ touch /home/ubuntu/UserData20210615040148.Access
+ sudo printf '-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAwjFaOR2FWYYCLp498rk5qWYT2qlAF7sC37tnlA9TVt/wltU9\nXFDjWeb4BQN04Ng1RHSR+fQKcjti/knYB4cNPkFD+nOI9PRdQr390CZaafrkhZyK\ny43qWmNL58XMQvLs6xCGsUUOST3RBJ4IjN/auF02qDwq0JfrXf/JxGYLwJANRLEV\njNACzd7VETW1J4Z/y39n64Y8MjwWLOOh+Mune2oo5gsuEegA+hTF2lb46mtH7lzm\nXZRnWQ5nJaLvATj1lug5fKVqmcQbOCQqQu1XCaNB5fEVDNpcrHNkKP06QHdbNy5+\nRZXi/pAlYsRgU7lXPFbiI5pM4S6wKslZN7jeawIDAQABAoIBAECAM/+Ulp5NrJvf\nY6QjccuaZC3U2b0IGMRHcvfyvzOz3i27Vk47b8iEtwyzQTcNmWPLdFEZhf67Sv47\neM3HRdbPxsyBY5Q5NmDcyllA4/cfppfajx9dW+H56VRqlpYGKjtJmfN3hG8/YRWv\niBeCoxtpmqX2liIC0+K8+z+IxY6Htb2v3rdQMEU2dvqYTX5MUZa/OoUn8I9dNzR6\n0EPM7SWDw2w2trJlk7b8CzxARKchi/sPOR70MQGSFwQsH2xRXwTAGENyY9zktHgZ\ni7Cso4u38uckftt52UOyQFgZ6Og1K1KmJY5f75KE4w+Rr4Br2ijLGGcR18ycAmCO\nRvNP3kECgYEA8m1SL5wX0UY6M6L0W8jC+Kwr2UqVRFihUposUhRj34tHGqy9uuBQ\nwiwaIFPiNdc1oQcQxBEfj+Eg7XRZadsMwLs8uWudvwQQutZIy7Dkfqryx/ztoeRm\ntjEjfaOvm+YISAxQwgARk88lVkbnqqrvaAB8p80CbdHgFqFn+lPgZTcCgYEAzRCy\nBA52by9QYIA7zBLpWbz//xm3CjRTp2weRvh6ZfgHemtsdpFRLPghkiQBB3sBHfVf\nRxtIV0JzuZhpj2YjyzmTQw8d+d7L6oikeXO8Zm5cMapEZALPa20ohrdsRx0FMJ4Z\nwg0wyacJ1n0uqriOKVKPCpzYzUvaCvJ2o6Vjam0CgYBlZjx+FXgQ3KLzfjFfQrXq\ndXlRxdRxZfD0L/Bh1I2BryvqiF5DkBe3X+L9qphvlLilxeLJX7An6i5vo77SfAD1\njFt14wF0KCsnOwHv0OmB4dbyt2Rd1r7vbdY+cvy85JaKLDyLKKQxgu9HCxlTVXQV\nuD5roWBmtuZYEOMA3Zx6OQKBgQDE7G529MiJFx+RvDMwU0zhj10qxa//zaYz1eDx\neHZZ66iKyBQ9fGk+zP24EHkojNfSxCp951Y97aOiLBnaylQ/OYgQUrkPlgOusw93\nTkwy9XH1g7Pvcr9rQ0UysXv6goTUXk8QCYi7bXxGDKq+6UIjrpOMtniAFYJLFvIV\nTqK8tQKBgQDWxlnPK6HP4lYbZz/eZskehBlJofTtoDX/G8tutHzuTvJQ5EKP1kUn\nJ7sF9I+zWOadXQvwSJnKP1kFGK/Yi21askJwL57AQCuaDAgTdVnsZzbCwwR5gdD6\nmUNLzlV5W6WfZgEhVMc60BtXCnUeDubADxzF76/2wil9Og1Wj+8TiQ==\n-----END RSA PRIVATE KEY-----'
+ chown ubuntu:ubuntu /home/ubuntu/.ssh/id_rsa
+ chmod 600 /home/ubuntu/.ssh/id_rsa
+ sudo printf 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCMVo5HYVZhgIunj3yuTmpZhPaqUAXuwLfu2eUD1NW3/CW1T1cUONZ5vgFA3Tg2DVEdJH59ApyO2L+SdgHhw0+QUP6c4j09F1Cvf3QJlpp+uSFnIrLjepaY0vnxcxC8uzrEIaxRQ5JPdEEngiM39q4XTaoPCrQl+td/8nEZgvAkA1EsRWM0ALN3tURNbUnhn/Lf2frhjwyPBYs46H4y6d7aijmCy4R6AD6FMXaVvjqa0fuXOZdlGdZDmclou8BOPWW6Dl8pWqZxBs4JCpC7VcJo0Hl8RUM2lysc2Qo/TpAd1s3Ln5FleL+kCVixGBTuVc8VuIjmkzhLrAqyVk3uN5r ubuntu@K8sMaster'
+ chown ubuntu:ubuntu /home/ubuntu/.ssh/id_rsa.pub
+ chmod 600 /home/ubuntu/.ssh/id_rsa.pub
+ timedatectl set-timezone Asia/Singapore
+ declare -a file_url
+ declare -a file_name
+ declare -a file_acl
+ declare -a file_owner
+ declare -a file_result
+ file_url[0]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepOS.sh
+ file_name[0]=/home/ubuntu/OSPreparationScript
+ file_acl[0]=777
+ file_owner[0]=ubuntu:ubuntu
+ file_url[1]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepDocker.sh
+ file_name[1]=/home/ubuntu/DockerPreparationScript
+ file_acl[1]=777
+ file_owner[1]=ubuntu:ubuntu
+ file_url[2]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepCommonK8s.sh
+ file_name[2]=/home/ubuntu/CommonK8sPreparationScript
+ file_acl[2]=777
+ file_owner[2]=ubuntu:ubuntu
+ file_url[3]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sMaster.sh
+ file_name[3]=/home/ubuntu/K8sMasterPreparationScript
+ file_acl[3]=777
+ file_owner[3]=ubuntu:ubuntu
+ file_url[4]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sWorker.sh
+ file_name[4]=/home/ubuntu/K8sWorkerPreparationScript
+ file_acl[4]=777
+ file_owner[4]=ubuntu:ubuntu
+ file_url[5]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sService.sh
+ file_name[5]=/home/ubuntu/K8sServicePreparationScript
+ file_acl[5]=777
+ file_owner[5]=ubuntu:ubuntu
+ file_url[6]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/CompileNGINXPlus.sh
+ file_name[6]=/home/ubuntu/CompileNGINXPlusScript
+ file_acl[6]=777
+ file_owner[6]=ubuntu:ubuntu
+ file_url[7]=https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepNGINXPlusKIC.sh
+ file_name[7]=/home/ubuntu/NGINXPlusIngressScript
+ file_acl[7]=777
+ file_owner[7]=ubuntu:ubuntu
+ max_counter=7
+ URLRegEx='^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$'
++ seq 0 7
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepOS.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepOS.sh -o /home/ubuntu/OSPreparationScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '0 ; HTTP 200 ; /home/ubuntu/OSPreparationScript download complete.'
0 ; HTTP 200 ; /home/ubuntu/OSPreparationScript download complete.
+ chmod 777 /home/ubuntu/OSPreparationScript
+ chown ubuntu:ubuntu /home/ubuntu/OSPreparationScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepDocker.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepDocker.sh -o /home/ubuntu/DockerPreparationScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '1 ; HTTP 200 ; /home/ubuntu/DockerPreparationScript download complete.'
1 ; HTTP 200 ; /home/ubuntu/DockerPreparationScript download complete.
+ chmod 777 /home/ubuntu/DockerPreparationScript
+ chown ubuntu:ubuntu /home/ubuntu/DockerPreparationScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepCommonK8s.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepCommonK8s.sh -o /home/ubuntu/CommonK8sPreparationScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '2 ; HTTP 200 ; /home/ubuntu/CommonK8sPreparationScript download complete.'
2 ; HTTP 200 ; /home/ubuntu/CommonK8sPreparationScript download complete.
+ chmod 777 /home/ubuntu/CommonK8sPreparationScript
+ chown ubuntu:ubuntu /home/ubuntu/CommonK8sPreparationScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sMaster.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sMaster.sh -o /home/ubuntu/K8sMasterPreparationScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '3 ; HTTP 200 ; /home/ubuntu/K8sMasterPreparationScript download complete.'
3 ; HTTP 200 ; /home/ubuntu/K8sMasterPreparationScript download complete.
+ chmod 777 /home/ubuntu/K8sMasterPreparationScript
+ chown ubuntu:ubuntu /home/ubuntu/K8sMasterPreparationScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sWorker.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sWorker.sh -o /home/ubuntu/K8sWorkerPreparationScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '4 ; HTTP 200 ; /home/ubuntu/K8sWorkerPreparationScript download complete.'
4 ; HTTP 200 ; /home/ubuntu/K8sWorkerPreparationScript download complete.
+ chmod 777 /home/ubuntu/K8sWorkerPreparationScript
+ chown ubuntu:ubuntu /home/ubuntu/K8sWorkerPreparationScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sService.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepK8sService.sh -o /home/ubuntu/K8sServicePreparationScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '5 ; HTTP 200 ; /home/ubuntu/K8sServicePreparationScript download complete.'
5 ; HTTP 200 ; /home/ubuntu/K8sServicePreparationScript download complete.
+ chmod 777 /home/ubuntu/K8sServicePreparationScript
+ chown ubuntu:ubuntu /home/ubuntu/K8sServicePreparationScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/CompileNGINXPlus.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/CompileNGINXPlus.sh -o /home/ubuntu/CompileNGINXPlusScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '6 ; HTTP 200 ; /home/ubuntu/CompileNGINXPlusScript download complete.'
6 ; HTTP 200 ; /home/ubuntu/CompileNGINXPlusScript download complete.
+ chmod 777 /home/ubuntu/CompileNGINXPlusScript
+ chown ubuntu:ubuntu /home/ubuntu/CompileNGINXPlusScript
+ for counter in $(seq 0 $max_counter)
+ [[ https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepNGINXPlusKIC.sh =~ ^(http:\/\/|https:\/\/)?[a-z0-9]+((\-|\.)[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)*$ ]]
++ /usr/bin/curl -sk -w '%{http_code}' https://raw.githubusercontent.com/gjwdyk/Notes-K8s/main/Bash/PrepNGINXPlusKIC.sh -o /home/ubuntu/NGINXPlusIngressScript
+ file_result[$counter]=200
+ [[ 200 == 200 ]]
+ echo '7 ; HTTP 200 ; /home/ubuntu/NGINXPlusIngressScript download complete.'
7 ; HTTP 200 ; /home/ubuntu/NGINXPlusIngressScript download complete.
+ chmod 777 /home/ubuntu/NGINXPlusIngressScript
+ chown ubuntu:ubuntu /home/ubuntu/NGINXPlusIngressScript
+ sudo bash /home/ubuntu/OSPreparationScript

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
apt is already the newest version (2.0.5).
apt set to manually installed.
curl is already the newest version (7.68.0-1ubuntu2.5).
curl set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
net.ipv4.ip_forward=1
net.bridge.bridge-nf-call-iptables=1
net.bridge.bridge-nf-call-ip6tables=1
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-link-restrictions.conf ...
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /etc/sysctl.d/99-sysctl.conf ...
net.ipv4.ip_forward = 1
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
* Applying /usr/lib/sysctl.d/protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.conf ...
net.ipv4.ip_forward = 1
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward = 1
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
LABEL=cloudimg-rootfs	/	 ext4	defaults,discard	0 1
# /etc/crontab: system-wide crontab
# Unlike any other crontab you don't have to run the `crontab'
# command to install the new version when you edit this file
# and files in /etc/cron.d. These files also have username fields,
# that none of the other crontabs do.

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

# Example of job definition:
# .---------------- minute (0 - 59)
# |  .------------- hour (0 - 23)
# |  |  .---------- day of month (1 - 31)
# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# |  |  |  |  |
# *  *  *  *  * user-name command to be executed
17 *	* * *	root    cd / && run-parts --report /etc/cron.hourly
25 6	* * *	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
47 6	* * 7	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
52 6	1 * *	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )
#
@reboot   root   swapoff -a
#
# /etc/sysctl.conf - Configuration file for setting system variables
# See /etc/sysctl.d/ for additional system variables.
# See sysctl.conf (5) for information.
#

#kernel.domainname = example.com

# Uncomment the following to stop low-level messages on console
#kernel.printk = 3 4 1 3

##############################################################3
# Functions previously found in netbase
#

# Uncomment the next two lines to enable Spoof protection (reverse-path filter)
# Turn on Source Address Verification in all interfaces to
# prevent some spoofing attacks
#net.ipv4.conf.default.rp_filter=1
#net.ipv4.conf.all.rp_filter=1

# Uncomment the next line to enable TCP/IP SYN cookies
# See http://lwn.net/Articles/277146/
# Note: This may impact IPv6 TCP sessions too
#net.ipv4.tcp_syncookies=1

# Uncomment the next line to enable packet forwarding for IPv4
#net.ipv4.ip_forward=1

# Uncomment the next line to enable packet forwarding for IPv6
#  Enabling this option disables Stateless Address Autoconfiguration
#  based on Router Advertisements for this host
#net.ipv6.conf.all.forwarding=1


###################################################################
# Additional settings - these settings can improve the network
# security of the host and prevent against some network attacks
# including spoofing attacks and man in the middle attacks through
# redirection. Some network environments, however, require that these
# settings are disabled so review and enable them as needed.
#
# Do not accept ICMP redirects (prevent MITM attacks)
#net.ipv4.conf.all.accept_redirects = 0
#net.ipv6.conf.all.accept_redirects = 0
# _or_
# Accept ICMP redirects only for gateways listed in our default
# gateway list (enabled by default)
# net.ipv4.conf.all.secure_redirects = 1
#
# Do not send ICMP redirects (we are not a router)
#net.ipv4.conf.all.send_redirects = 0
#
# Do not accept IP source route packets (we are not a router)
#net.ipv4.conf.all.accept_source_route = 0
#net.ipv6.conf.all.accept_source_route = 0
#
# Log Martian Packets
#net.ipv4.conf.all.log_martians = 1
#

###################################################################
# Magic system request Key
# 0=disable, 1=enable all, >1 bitmask of sysrq functions
# See https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html
# for what other values do
#kernel.sysrq=438

net.ipv4.ip_forward=1
net.bridge.bridge-nf-call-iptables=1
net.bridge.bridge-nf-call-ip6tables=1
1
+ sudo bash /home/ubuntu/DockerPreparationScript 19.03.8-0ubuntu1.20.04.1

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal InRelease
Get:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]
Get:4 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:5 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]
Get:6 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata [265 kB]
Get:7 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]
Get:8 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]
Get:9 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]
Get:10 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [1031 kB]
Get:11 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/main Translation-en [229 kB]
Get:12 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata [13.5 kB]
Get:13 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [272 kB]
Get:14 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en [39.5 kB]
Get:15 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [781 kB]
Get:16 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/universe Translation-en [170 kB]
Get:17 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata [17.7 kB]
Get:18 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [23.6 kB]
Get:19 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en [6376 B]
Get:20 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata [648 B]
Get:21 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:22 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata [112 B]
Get:23 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata [116 B]
Get:24 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [4032 B]
Get:25 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [1448 B]
Get:26 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [224 B]
Get:27 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata [116 B]
Get:28 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [704 kB]
Get:29 http://security.ubuntu.com/ubuntu focal-security/main Translation-en [141 kB]
Get:30 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [251 kB]
Get:31 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en [36.5 kB]
Get:32 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [588 kB]
Get:33 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en [95.2 kB]
Get:34 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata [11.5 kB]
Get:35 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [19.9 kB]
Get:36 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en [4316 B]
Get:37 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata [528 B]
Fetched 19.0 MB in 3s (5648 kB/s)
Reading package lists...
Building dependency tree...
Reading state information...
8 packages can be upgraded. Run 'apt list --upgradable' to see them.
Warning: apt-key output should not be parsed (stdout is not a terminal)
OK
Hit:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports InRelease
Get:4 https://download.docker.com/linux/ubuntu focal InRelease [52.1 kB]
Get:5 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [9960 B]
Hit:6 http://security.ubuntu.com/ubuntu focal-security InRelease
Fetched 62.1 kB in 1s (104 kB/s)
Reading package lists...

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:4 https://download.docker.com/linux/ubuntu focal InRelease
Hit:5 http://security.ubuntu.com/ubuntu focal-security InRelease
Reading package lists...
Building dependency tree...
Reading state information...
8 packages can be upgraded. Run 'apt list --upgradable' to see them.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  docker-ce-rootless-extras docker-scan-plugin pigz slirp4netns
Suggested packages:
  aufs-tools cgroupfs-mount | cgroup-lite
The following NEW packages will be installed:
  containerd.io docker-ce docker-ce-cli docker-ce-rootless-extras
  docker-scan-plugin pigz slirp4netns
0 upgraded, 7 newly installed, 0 to remove and 8 not upgraded.
Need to get 108 MB of archives.
After this operation, 466 MB of additional disk space will be used.
Get:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/universe amd64 pigz amd64 2.4-1 [57.4 kB]
Get:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/universe amd64 slirp4netns amd64 0.4.3-1 [74.3 kB]
Get:3 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.4.6-1 [28.3 MB]
Get:4 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce-cli amd64 5:20.10.7~3-0~ubuntu-focal [41.4 MB]
Get:5 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce amd64 5:20.10.7~3-0~ubuntu-focal [24.8 MB]
Get:6 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce-rootless-extras amd64 5:20.10.7~3-0~ubuntu-focal [9063 kB]
Get:7 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-scan-plugin amd64 0.8.0~ubuntu-focal [3889 kB]
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Fetched 108 MB in 2s (60.7 MB/s)
Selecting previously unselected package pigz.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 60194 files and directories currently installed.)
Preparing to unpack .../0-pigz_2.4-1_amd64.deb ...
Unpacking pigz (2.4-1) ...
Selecting previously unselected package containerd.io.
Preparing to unpack .../1-containerd.io_1.4.6-1_amd64.deb ...
Unpacking containerd.io (1.4.6-1) ...
Selecting previously unselected package docker-ce-cli.
Preparing to unpack .../2-docker-ce-cli_5%3a20.10.7~3-0~ubuntu-focal_amd64.deb ...
Unpacking docker-ce-cli (5:20.10.7~3-0~ubuntu-focal) ...
Selecting previously unselected package docker-ce.
Preparing to unpack .../3-docker-ce_5%3a20.10.7~3-0~ubuntu-focal_amd64.deb ...
Unpacking docker-ce (5:20.10.7~3-0~ubuntu-focal) ...
Selecting previously unselected package docker-ce-rootless-extras.
Preparing to unpack .../4-docker-ce-rootless-extras_5%3a20.10.7~3-0~ubuntu-focal_amd64.deb ...
Unpacking docker-ce-rootless-extras (5:20.10.7~3-0~ubuntu-focal) ...
Selecting previously unselected package docker-scan-plugin.
Preparing to unpack .../5-docker-scan-plugin_0.8.0~ubuntu-focal_amd64.deb ...
Unpacking docker-scan-plugin (0.8.0~ubuntu-focal) ...
Selecting previously unselected package slirp4netns.
Preparing to unpack .../6-slirp4netns_0.4.3-1_amd64.deb ...
Unpacking slirp4netns (0.4.3-1) ...
Setting up slirp4netns (0.4.3-1) ...
Setting up docker-scan-plugin (0.8.0~ubuntu-focal) ...
Setting up containerd.io (1.4.6-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Setting up docker-ce-cli (5:20.10.7~3-0~ubuntu-focal) ...
Setting up pigz (2.4-1) ...
Setting up docker-ce-rootless-extras (5:20.10.7~3-0~ubuntu-focal) ...
Setting up docker-ce (5:20.10.7~3-0~ubuntu-focal) ...
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /lib/systemd/system/docker.service.
Created symlink /etc/systemd/system/sockets.target.wants/docker.socket → /lib/systemd/system/docker.socket.
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for systemd (245.4-4ubuntu3.6) ...
{
  "exec-opts": ["native.cgroupdriver=systemd"],
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m"
  },
  "storage-driver": "overlay2"
}
Synchronizing state of docker.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable docker
● docker.service - Docker Application Container Engine
     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2021-06-15 12:02:35 +08; 724ms ago
TriggeredBy: ● docker.socket
       Docs: https://docs.docker.com
   Main PID: 4081 (dockerd)
      Tasks: 10
     Memory: 39.3M
     CGroup: /system.slice/docker.service
             └─4081 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock

Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.185790676+08:00" level=warning msg="Your kernel does not support CPU realtime scheduler"
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.185805666+08:00" level=warning msg="Your kernel does not support cgroup blkio weight"
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.185817507+08:00" level=warning msg="Your kernel does not support cgroup blkio weight_device"
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.186020979+08:00" level=info msg="Loading containers: start."
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.288840533+08:00" level=info msg="Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address"
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.331426952+08:00" level=info msg="Loading containers: done."
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.360862218+08:00" level=info msg="Docker daemon" commit=b0f5bc3 graphdriver(s)=overlay2 version=20.10.7
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.360965449+08:00" level=info msg="Daemon has completed initialization"
Jun 15 12:02:35 ip-10-1-1-11 systemd[1]: Started Docker Application Container Engine.
Jun 15 12:02:35 ip-10-1-1-11 dockerd[4081]: time="2021-06-15T12:02:35.390499966+08:00" level=info msg="API listen on /run/docker.sock"
Docker version 20.10.7, build f0df350
WARNING: No swap limit support
 Cgroup Driver: systemd
 Cgroup Version: 1
+ sudo bash /home/ubuntu/CommonK8sPreparationScript 1.20.7-00 1.20.7-00 1.20.7-00 0.8.7-00
Warning: apt-key output should not be parsed (stdout is not a terminal)
OK
Hit:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:4 https://download.docker.com/linux/ubuntu focal InRelease
Hit:6 http://security.ubuntu.com/ubuntu focal-security InRelease
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Get:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [47.0 kB]
Fetched 56.4 kB in 1s (49.3 kB/s)
Reading package lists...

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:4 https://download.docker.com/linux/ubuntu focal InRelease
Hit:5 https://packages.cloud.google.com/apt kubernetes-xenial InRelease
Hit:6 http://security.ubuntu.com/ubuntu focal-security InRelease
Reading package lists...
Building dependency tree...
Reading state information...
8 packages can be upgraded. Run 'apt list --upgradable' to see them.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  conntrack cri-tools ebtables socat
Suggested packages:
  nftables
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 8 not upgraded.
Need to get 68.7 MB of archives.
After this operation, 294 MB of additional disk space will be used.
Get:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/main amd64 conntrack amd64 1:1.4.5-2 [30.3 kB]
Get:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/main amd64 ebtables amd64 2.0.11-3build1 [80.3 kB]
Get:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/main amd64 socat amd64 1.7.3.3-2 [323 kB]
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.13.0-01 [8775 kB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.20.7-00 [18.9 MB]
Get:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.20.7-00 [7939 kB]
Get:8 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.20.7-00 [7705 kB]
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Fetched 68.7 MB in 7s (10.1 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 60445 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.5-2_amd64.deb ...
Unpacking conntrack (1:1.4.5-2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.13.0-01_amd64.deb ...
Unpacking cri-tools (1.13.0-01) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-3build1_amd64.deb ...
Unpacking ebtables (2.0.11-3build1) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.3.3-2_amd64.deb ...
Unpacking socat (1.7.3.3-2) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.20.7-00_amd64.deb ...
Unpacking kubelet (1.20.7-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.20.7-00_amd64.deb ...
Unpacking kubectl (1.20.7-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.20.7-00_amd64.deb ...
Unpacking kubeadm (1.20.7-00) ...
Setting up conntrack (1:1.4.5-2) ...
Setting up kubectl (1.20.7-00) ...
Setting up ebtables (2.0.11-3build1) ...
Setting up socat (1.7.3.3-2) ...
Setting up cri-tools (1.13.0-01) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.20.7-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.20.7-00) ...
Processing triggers for man-db (2.9.1-1) ...
+ sudo bash /home/ubuntu/K8sMasterPreparationScript 10.244.0.0/16 10.96.0.0/12 https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
I0615 12:03:05.347658    5930 version.go:254] remote version is much newer: v1.21.1; falling back to: stable-1.20
[init] Using Kubernetes version: v1.20.7
[preflight] Running pre-flight checks
	[WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.7. Latest validated version: 19.03
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'
[certs] Using certificateDir folder "/etc/kubernetes/pki"
[certs] Generating "ca" certificate and key
[certs] Generating "apiserver" certificate and key
[certs] apiserver serving cert is signed for DNS names [ip-10-1-1-11 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 10.1.1.11]
[certs] Generating "apiserver-kubelet-client" certificate and key
[certs] Generating "front-proxy-ca" certificate and key
[certs] Generating "front-proxy-client" certificate and key
[certs] Generating "etcd/ca" certificate and key
[certs] Generating "etcd/server" certificate and key
[certs] etcd/server serving cert is signed for DNS names [ip-10-1-1-11 localhost] and IPs [10.1.1.11 127.0.0.1 ::1]
[certs] Generating "etcd/peer" certificate and key
[certs] etcd/peer serving cert is signed for DNS names [ip-10-1-1-11 localhost] and IPs [10.1.1.11 127.0.0.1 ::1]
[certs] Generating "etcd/healthcheck-client" certificate and key
[certs] Generating "apiserver-etcd-client" certificate and key
[certs] Generating "sa" key and public key
[kubeconfig] Using kubeconfig folder "/etc/kubernetes"
[kubeconfig] Writing "admin.conf" kubeconfig file
[kubeconfig] Writing "kubelet.conf" kubeconfig file
[kubeconfig] Writing "controller-manager.conf" kubeconfig file
[kubeconfig] Writing "scheduler.conf" kubeconfig file
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Starting the kubelet
[control-plane] Using manifest folder "/etc/kubernetes/manifests"
[control-plane] Creating static Pod manifest for "kube-apiserver"
[control-plane] Creating static Pod manifest for "kube-controller-manager"
[control-plane] Creating static Pod manifest for "kube-scheduler"
[etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s
[apiclient] All control plane components are healthy after 12.006109 seconds
[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace
[kubelet] Creating a ConfigMap "kubelet-config-1.20" in namespace kube-system with the configuration for the kubelets in the cluster
[upload-certs] Skipping phase. Please see --upload-certs
[mark-control-plane] Marking the node ip-10-1-1-11 as control-plane by adding the labels "node-role.kubernetes.io/master=''" and "node-role.kubernetes.io/control-plane='' (deprecated)"
[mark-control-plane] Marking the node ip-10-1-1-11 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]
[bootstrap-token] Using token: d4xn0r.90ukdlsaspfqi9i9
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace
[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

Alternatively, if you are the root user, you can run:

  export KUBECONFIG=/etc/kubernetes/admin.conf

You should now deploy a pod network to the cluster.
Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 10.1.1.11:6443 --token d4xn0r.90ukdlsaspfqi9i9 \
    --discovery-token-ca-cert-hash sha256:37be18dbd19361cbc26e4c7c6e339445b52f5b6e343d1b7dbdd14f07b7b2e290 
podsecuritypolicy.policy/psp.flannel.unprivileged created
clusterrole.rbac.authorization.k8s.io/flannel created
clusterrolebinding.rbac.authorization.k8s.io/flannel created
serviceaccount/flannel created
configmap/kube-flannel-cfg created
daemonset.apps/kube-flannel-ds created
NAME           STATUS   ROLES                  AGE    VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION   CONTAINER-RUNTIME
ip-10-1-1-11   Ready    control-plane,master   2m5s   v1.20.7   10.1.1.11     <none>        Ubuntu 20.04.2 LTS   5.4.0-1049-aws   docker://20.10.7
NAMESPACE     NAME                                   READY   STATUS    RESTARTS   AGE    IP           NODE           NOMINATED NODE   READINESS GATES
kube-system   coredns-74ff55c5b-dvhcd                1/1     Running   0          108s   10.244.0.3   ip-10-1-1-11   <none>           <none>
kube-system   coredns-74ff55c5b-qt62w                1/1     Running   0          108s   10.244.0.2   ip-10-1-1-11   <none>           <none>
kube-system   etcd-ip-10-1-1-11                      1/1     Running   0          2m1s   10.1.1.11    ip-10-1-1-11   <none>           <none>
kube-system   kube-apiserver-ip-10-1-1-11            1/1     Running   0          2m1s   10.1.1.11    ip-10-1-1-11   <none>           <none>
kube-system   kube-controller-manager-ip-10-1-1-11   1/1     Running   0          2m1s   10.1.1.11    ip-10-1-1-11   <none>           <none>
kube-system   kube-flannel-ds-qsp7x                  1/1     Running   0          61s    10.1.1.11    ip-10-1-1-11   <none>           <none>
kube-system   kube-proxy-x9ktx                       1/1     Running   0          108s   10.1.1.11    ip-10-1-1-11   <none>           <none>
kube-system   kube-scheduler-ip-10-1-1-11            1/1     Running   0          2m1s   10.1.1.11    ip-10-1-1-11   <none>           <none>
NAMESPACE     NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE    SELECTOR
default       kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP                  2m4s   <none>
kube-system   kube-dns     ClusterIP   10.96.0.10   <none>        53/UDP,53/TCP,9153/TCP   2m2s   k8s-app=kube-dns
+ sudo bash /home/ubuntu/K8sWorkerPreparationScript 10.1.1.101
Warning: Permanently added '10.1.1.101' (ECDSA) to the list of known hosts.
[preflight] Running pre-flight checks
	[WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.7. Latest validated version: 19.03
[preflight] Reading configuration from the cluster...
[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Starting the kubelet
[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run 'kubectl get nodes' on the control-plane to see this node join the cluster.

NAME            STATUS   ROLES                  AGE     VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION   CONTAINER-RUNTIME
ip-10-1-1-101   Ready    <none>                 64s     v1.20.7   10.1.1.101    <none>        Ubuntu 20.04.2 LTS   5.4.0-1049-aws   docker://20.10.7
ip-10-1-1-11    Ready    control-plane,master   3m13s   v1.20.7   10.1.1.11     <none>        Ubuntu 20.04.2 LTS   5.4.0-1049-aws   docker://20.10.7
NAMESPACE     NAME                                   READY   STATUS    RESTARTS   AGE     IP           NODE            NOMINATED NODE   READINESS GATES
kube-system   coredns-74ff55c5b-dvhcd                1/1     Running   0          2m56s   10.244.0.3   ip-10-1-1-11    <none>           <none>
kube-system   coredns-74ff55c5b-qt62w                1/1     Running   0          2m56s   10.244.0.2   ip-10-1-1-11    <none>           <none>
kube-system   etcd-ip-10-1-1-11                      1/1     Running   0          3m9s    10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system   kube-apiserver-ip-10-1-1-11            1/1     Running   0          3m9s    10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system   kube-controller-manager-ip-10-1-1-11   1/1     Running   0          3m9s    10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system   kube-flannel-ds-74jbd                  1/1     Running   0          64s     10.1.1.101   ip-10-1-1-101   <none>           <none>
kube-system   kube-flannel-ds-qsp7x                  1/1     Running   0          2m9s    10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system   kube-proxy-6mrc4                       1/1     Running   0          64s     10.1.1.101   ip-10-1-1-101   <none>           <none>
kube-system   kube-proxy-x9ktx                       1/1     Running   0          2m56s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system   kube-scheduler-ip-10-1-1-11            1/1     Running   0          3m9s    10.1.1.11    ip-10-1-1-11    <none>           <none>
NAMESPACE     NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE     SELECTOR
default       kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP                  3m12s   <none>
kube-system   kube-dns     ClusterIP   10.96.0.10   <none>        53/UDP,53/TCP,9153/TCP   3m10s   k8s-app=kube-dns
+ sudo bash /home/ubuntu/K8sServicePreparationScript
namespace/kubernetes-dashboard created
serviceaccount/kubernetes-dashboard created
service/kubernetes-dashboard created
secret/kubernetes-dashboard-certs created
secret/kubernetes-dashboard-csrf created
secret/kubernetes-dashboard-key-holder created
configmap/kubernetes-dashboard-settings created
role.rbac.authorization.k8s.io/kubernetes-dashboard created
clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created
rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created
clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created
deployment.apps/kubernetes-dashboard created
service/dashboard-metrics-scraper created
deployment.apps/dashboard-metrics-scraper created
serviceaccount/admin-user created
clusterrolebinding.rbac.authorization.k8s.io/admin-user created
service/kubernetes-dashboard patched
deployment.apps/kubernetes-dashboard patched
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0Warning: apt-key output should not be parsed (stdout is not a terminal)
100  1700  100  1700    0     0  16346      0 --:--:-- --:--:-- --:--:-- 16346
OK
Reading package lists...
Building dependency tree...
Reading state information...
The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 11 not upgraded.
Need to get 1704 B of archives.
After this operation, 161 kB of additional disk space will be used.
Get:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates/universe amd64 apt-transport-https all 2.0.5 [1704 B]
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Fetched 1704 B in 0s (57.6 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 60538 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.0.5_all.deb ...
Unpacking apt-transport-https (2.0.5) ...
Setting up apt-transport-https (2.0.5) ...
deb https://baltocdn.com/helm/stable/debian/ all main
Hit:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:3 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:4 https://download.docker.com/linux/ubuntu focal InRelease
Get:5 https://baltocdn.com/helm/stable/debian all InRelease [7652 B]
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Hit:7 http://security.ubuntu.com/ubuntu focal-security InRelease
Get:8 https://baltocdn.com/helm/stable/debian all/main amd64 Packages [2020 B]
Fetched 19.1 kB in 5s (4229 B/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following NEW packages will be installed:
  helm
0 upgraded, 1 newly installed, 0 to remove and 11 not upgraded.
Need to get 14.1 MB of archives.
After this operation, 46.6 MB of additional disk space will be used.
Get:1 https://baltocdn.com/helm/stable/debian all/main amd64 helm amd64 3.6.0-1 [14.1 MB]
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Fetched 14.1 MB in 1s (12.2 MB/s)
Selecting previously unselected package helm.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 60542 files and directories currently installed.)
Preparing to unpack .../helm_3.6.0-1_amd64.deb ...
Unpacking helm (3.6.0-1) ...
Setting up helm (3.6.0-1) ...
Processing triggers for man-db (2.9.1-1) ...
version.BuildInfo{Version:"v3.6.0", GitCommit:"7f2df6467771a75f5646b7f12afb408590ed1755", GitTreeState:"clean", GoVersion:"go1.16.3"}
"prometheus-community" has been added to your repositories
NAME: prometheus
LAST DEPLOYED: Tue Jun 15 12:07:37 2021
NAMESPACE: prometheus
STATUS: deployed
REVISION: 1
NOTES:
kube-prometheus-stack has been installed. Check its status by running:
  kubectl --namespace prometheus get pods -l "release=prometheus"

Visit https://github.com/prometheus-operator/kube-prometheus for instructions on how to create & configure Alertmanager and Prometheus instances using the Operator.
service/prometheus-kube-prometheus-prometheus patched
service/prometheus-grafana patched
NAME            STATUS   ROLES                  AGE     VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION   CONTAINER-RUNTIME
ip-10-1-1-101   Ready    <none>                 2m53s   v1.20.7   10.1.1.101    <none>        Ubuntu 20.04.2 LTS   5.4.0-1049-aws   docker://20.10.7
ip-10-1-1-11    Ready    control-plane,master   5m2s    v1.20.7   10.1.1.11     <none>        Ubuntu 20.04.2 LTS   5.4.0-1049-aws   docker://20.10.7
NAMESPACE              NAME                                  READY   UP-TO-DATE   AVAILABLE   AGE    CONTAINERS                     IMAGES                                                      SELECTOR
kube-system            coredns                               2/2     2            2           5m     coredns                        k8s.gcr.io/coredns:1.7.0                                    k8s-app=kube-dns
kubernetes-dashboard   dashboard-metrics-scraper             1/1     1            1           108s   dashboard-metrics-scraper      kubernetesui/metrics-scraper:v1.0.6                         k8s-app=dashboard-metrics-scraper
kubernetes-dashboard   kubernetes-dashboard                  1/1     1            1           109s   kubernetes-dashboard           kubernetesui/dashboard:v2.2.0                               k8s-app=kubernetes-dashboard
prometheus             prometheus-grafana                    0/1     1            0           70s    grafana-sc-dashboard,grafana   quay.io/kiwigrid/k8s-sidecar:1.10.6,grafana/grafana:7.4.2   app.kubernetes.io/instance=prometheus,app.kubernetes.io/name=grafana
prometheus             prometheus-kube-prometheus-operator   1/1     1            1           70s    kube-prometheus-stack          quay.io/prometheus-operator/prometheus-operator:v0.45.0     app=kube-prometheus-stack-operator,release=prometheus
prometheus             prometheus-kube-state-metrics         1/1     1            1           70s    kube-state-metrics             k8s.gcr.io/kube-state-metrics/kube-state-metrics:v1.9.8     app.kubernetes.io/name=kube-state-metrics
NAMESPACE              NAME                                                     READY   STATUS              RESTARTS   AGE     IP           NODE            NOMINATED NODE   READINESS GATES
kube-system            coredns-74ff55c5b-dvhcd                                  1/1     Running             0          4m46s   10.244.0.3   ip-10-1-1-11    <none>           <none>
kube-system            coredns-74ff55c5b-qt62w                                  1/1     Running             0          4m46s   10.244.0.2   ip-10-1-1-11    <none>           <none>
kube-system            etcd-ip-10-1-1-11                                        1/1     Running             0          4m59s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system            kube-apiserver-ip-10-1-1-11                              1/1     Running             0          4m59s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system            kube-controller-manager-ip-10-1-1-11                     1/1     Running             0          4m59s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system            kube-flannel-ds-74jbd                                    1/1     Running             0          2m54s   10.1.1.101   ip-10-1-1-101   <none>           <none>
kube-system            kube-flannel-ds-qsp7x                                    1/1     Running             0          3m59s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system            kube-proxy-6mrc4                                         1/1     Running             0          2m54s   10.1.1.101   ip-10-1-1-101   <none>           <none>
kube-system            kube-proxy-x9ktx                                         1/1     Running             0          4m46s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kube-system            kube-scheduler-ip-10-1-1-11                              1/1     Running             0          4m59s   10.1.1.11    ip-10-1-1-11    <none>           <none>
kubernetes-dashboard   dashboard-metrics-scraper-79c5968bdc-qb5m8               1/1     Running             0          108s    10.244.1.3   ip-10-1-1-101   <none>           <none>
kubernetes-dashboard   kubernetes-dashboard-844c99cbd5-zj6mk                    1/1     Running             0          108s    10.244.1.4   ip-10-1-1-101   <none>           <none>
prometheus             alertmanager-prometheus-kube-prometheus-alertmanager-0   0/2     ContainerCreating   0          47s     <none>       ip-10-1-1-101   <none>           <none>
prometheus             prometheus-grafana-6d4758bcc-6sc24                       0/2     PodInitializing     0          70s     10.244.1.8   ip-10-1-1-101   <none>           <none>
prometheus             prometheus-kube-prometheus-operator-6b455dd76b-hjbvz     1/1     Running             0          70s     10.244.1.7   ip-10-1-1-101   <none>           <none>
prometheus             prometheus-kube-state-metrics-685b975bb7-4bwp6           1/1     Running             0          70s     10.244.1.6   ip-10-1-1-101   <none>           <none>
prometheus             prometheus-prometheus-kube-prometheus-prometheus-0       0/2     ContainerCreating   0          46s     <none>       ip-10-1-1-101   <none>           <none>
prometheus             prometheus-prometheus-node-exporter-72cpr                1/1     Running             0          70s     10.1.1.11    ip-10-1-1-11    <none>           <none>
prometheus             prometheus-prometheus-node-exporter-q5k4s                1/1     Running             0          70s     10.1.1.101   ip-10-1-1-101   <none>           <none>
NAMESPACE              NAME                                                 TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                        AGE    SELECTOR
default                kubernetes                                           ClusterIP   10.96.0.1        <none>        443/TCP                        5m2s   <none>
kube-system            kube-dns                                             ClusterIP   10.96.0.10       <none>        53/UDP,53/TCP,9153/TCP         5m     k8s-app=kube-dns
kube-system            prometheus-kube-prometheus-coredns                   ClusterIP   None             <none>        9153/TCP                       70s    k8s-app=kube-dns
kube-system            prometheus-kube-prometheus-kube-controller-manager   ClusterIP   None             <none>        10252/TCP                      70s    component=kube-controller-manager
kube-system            prometheus-kube-prometheus-kube-etcd                 ClusterIP   None             <none>        2379/TCP                       70s    component=etcd
kube-system            prometheus-kube-prometheus-kube-proxy                ClusterIP   None             <none>        10249/TCP                      70s    k8s-app=kube-proxy
kube-system            prometheus-kube-prometheus-kube-scheduler            ClusterIP   None             <none>        10251/TCP                      70s    component=kube-scheduler
kube-system            prometheus-kube-prometheus-kubelet                   ClusterIP   None             <none>        10250/TCP,10255/TCP,4194/TCP   47s    <none>
kubernetes-dashboard   dashboard-metrics-scraper                            ClusterIP   10.109.241.183   <none>        8000/TCP                       108s   k8s-app=dashboard-metrics-scraper
kubernetes-dashboard   kubernetes-dashboard                                 NodePort    10.99.209.13     <none>        443:30443/TCP                  109s   k8s-app=kubernetes-dashboard
prometheus             alertmanager-operated                                ClusterIP   None             <none>        9093/TCP,9094/TCP,9094/UDP     47s    app=alertmanager
prometheus             prometheus-grafana                                   NodePort    10.96.170.251    <none>        80:30082/TCP                   70s    app.kubernetes.io/instance=prometheus,app.kubernetes.io/name=grafana
prometheus             prometheus-kube-prometheus-alertmanager              ClusterIP   10.105.51.11     <none>        9093/TCP                       70s    alertmanager=prometheus-kube-prometheus-alertmanager,app=alertmanager
prometheus             prometheus-kube-prometheus-operator                  ClusterIP   10.108.133.161   <none>        443/TCP                        70s    app=kube-prometheus-stack-operator,release=prometheus
prometheus             prometheus-kube-prometheus-prometheus                NodePort    10.104.44.79     <none>        9090:30081/TCP                 70s    app=prometheus,prometheus=prometheus-kube-prometheus-prometheus
prometheus             prometheus-kube-state-metrics                        ClusterIP   10.99.249.77     <none>        8080/TCP                       70s    app.kubernetes.io/instance=prometheus,app.kubernetes.io/name=kube-state-metrics
prometheus             prometheus-operated                                  ClusterIP   None             <none>        9090/TCP                       46s    app=prometheus
prometheus             prometheus-prometheus-node-exporter                  ClusterIP   10.102.144.48    <none>        9100/TCP                       70s    app=prometheus-node-exporter,release=prometheus
+ sudo printf '-----BEGIN CERTIFICATE-----\nMIIDXDCCAkSgAwIBAgIDAbbIMA0GCSqGSIb3DQEBBQUAMD4xEjAQBgNVBAoMCU5H\nSU5YIEluYzEoMCYGA1UEAwwfbmdpbnggY2xpZW50IGF1dGhlbnRpY2F0aW9uIENB\nMjAeFw0yMTA1MTUxMDI4MzBaFw0yMTA2MTQxMDI4MzBaMEcxEjAQBgNVBAoMCU5H\nSU5YIEluYzEcMBoGA1UECwwTQ2xpZW50IGNlcnRpZmljYXRlczETMBEGA1UEAwwK\nVDAwMDExMDU0NzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALn/AIkj\noza+6oFsz0tAhnQPIinWui4Gw3/4Xop1yNwR6r4Z68lLNO07jfEF/atvlG4kt96O\n+JTVyYmmxEC+r4NUL0GCns6JE8UpP/l/dACZH0B5ux/OwDm53hGQ1nSmxxTnYCfP\ncqt+YSmnja4mF4R1DyMTJ9RlvI6LJTHYi3HvkP2hQVcgPNL93lMMu/0mW47be8za\nfKcN8T7oxC+7BnloyzOZhd3We6d0E6TgrlIfrzzRHSl7qwNm3J3jVhz1OSJ55AXZ\nAL4OyWITVUJrbz12Ai3QG+w5NByqiP3NzJjOy5qneuRK6g27/qPdUCo9XG2k01ii\nA7UYhACZWPYk1pMCAwEAAaNaMFgwIAYJYIZIAYb4QgENBBMWEVBhaWQgc3Vic2Ny\naXB0aW9uMA4GA1UdDwEB/wQEAwIDiDAMBgNVHRMBAf8EAjAAMBYGA1UdJQEB/wQM\nMAoGCCsGAQUFBwMCMA0GCSqGSIb3DQEBBQUAA4IBAQAsAXP1En03PjI7qk/Uj5SR\nmfJ3RrHpMDmTP/CScuTf1e4Num7umcZNtIlXq5PYLVKQFAR2t9XjsfGRInbu8Lyu\n0weWRpzXmzrxdKA3m8FCs3a/EBSuui9YAhGhI+Mn7ox4P4vTZs7L5YFj6JF4qbwe\nHGEXKWjfRWRKGmhSj3/sraC6c86Uwl8+Ln36Stg0WRHGI2jkYWPY4NKDEr7mmVQl\nvW8/zRa+rneZPNlR+hK5Y5ejZvQ+EXHPq/aRKU3Nal39fjF1snc3e0fuDjZwBKbS\n+0tRyaGq1PkPTldooJqYqaUooR61IV7OwKEfSrH0ncHgPrsGMqUVILeXItEhbe2+\n-----END CERTIFICATE-----'
+ chown ubuntu:ubuntu /home/ubuntu/nginx-repo.crt
+ chmod 600 /home/ubuntu/nginx-repo.crt
+ sudo printf '-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC5/wCJI6M2vuqB\nbM9LQIZ0DyIp1rouBsN/+F6KdcjcEeq+GevJSzTtO43xBf2rb5RuJLfejviU1cmJ\npsRAvq+DVC9Bgp7OiRPFKT/5f3QAmR9AebsfzsA5ud4RkNZ0pscU52Anz3KrfmEp\np42uJheEdQ8jEyfUZbyOiyUx2Itx75D9oUFXIDzS/d5TDLv9JluO23vM2nynDfE+\n6MQvuwZ5aMszmYXd1nundBOk4K5SH6880R0pe6sDZtyd41Yc9TkieeQF2QC+Dsli\nE1VCa289dgIt0BvsOTQcqoj9zcyYzsuap3rkSuoNu/6j3VAqPVxtpNNYogO1GIQA\nmVj2JNaTAgMBAAECggEAIw4sy6wr1uWkzT/00foXXUh85+XQsVwU/MmTCAWrFc9K\nrwmzpvzFvPC8j/DRHr6o+xlwjkHkGCkzEv6bfphx/A6h2XcE92hekYp0xFGBS5uQ\niFZpLlWJZVfiwuzJfrLwUsBJHze6JRhst60cxvXm+NAXSkUR/LYwE62mFP77ST3L\nRsT0gmp3C8xqsvB79mUv4Wk2kC1nyFaIver8tgu0VxOPWSPKatYizWWhs+iBGXD4\nfnvrJ0Z3PQcvYZLbO4AI6kZsYkk2CoYlYUUi+eaQ6FFMfLOE2S93cEiUNi2Lx+BM\nurq8J+XGPLPeEnKdqqXBUwkskjPQ6XfuMRMbmjCaAQKBgQDt1IPNITIIc9WtaV93\nImn/HADtNGn/HfpfJdj6I38ajMSwW/V1tpCizr1ocFN2j2qpBl6rpX7/WvWjWULD\nwr6pGOZam1I+WvLVJ6gaTnb3xgO171Bgj+Xoqkdl4KAEjW4lt7tcf7y4Ok6GowKM\nTZMB9t0g0SBlIhfPPdppDGhLjQKBgQDINLdqxd5sSIk3juqjjR25KWFbAHtEtjW0\nKTusLov0fQ6/uBK+8Db5RU47QZq1uwmLMrU6ZxqLwFnBC4tqQxlKL7mIkojoccdl\ne9vjbcnMDJ+g2F02dHF1PADjeKpsvYgDgJy43eIhMbnYs5N3pjYLBySOJgGODNm/\n2USkscYSnwKBgCe4Ax8B+ToiJkBkxbW+wJcDVUBILZ+WoRa82mTEAtkrQzn00aSM\nDdGy1z0W7UlyoCyETNE7vV7mEPnr0VOiNXdGGkptgCm7xKxGiDOEgSfWIQ6EXhcS\nUSIvNedUwUShXhDcg2TqTFk0G6MunCFUX0XHtZxicJeTPwi0WsKKeOyNAoGAc7Y0\nRFv0f/U0iY3qg3iuMzR9dlFC7aW6SFSEjrGgZkBZY+mJvB2uSEgMPSdfuaVOkMtP\n/19T8m3L8k0v2MzLMxt+SjcXNfF842TA5COyPGMXZ6llxnFqme2CPfah2ZN5pzyQ\nWDC136WT2nF/y+me1qTcNeQ1hdpbiAyVJfMxndUCgYEAqIOyJVmsrWakhb+OAnMJ\nLcrILv0triTpY7+pIeaK+BHQq4eGa4ncDjmfSfv+2WALKUpHZkOiZ5XuxtuU0B92\nKuXOH0B0dAhvrvR/faaELdr1kPpHozyhTYk38+pnzswSMPnaWVGvHakom+LI8Piw\nryF2mvftwpDCRVXjF1Kx/hc=\n-----END PRIVATE KEY-----'
+ chown ubuntu:ubuntu /home/ubuntu/nginx-repo.key
+ chmod 600 /home/ubuntu/nginx-repo.key
+ sudo bash /home/ubuntu/CompileNGINXPlusScript v1.11.3 gjwdyk D0ck3rHubS1ch3rh31t5 gjwdyk/nginx-ingress No

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
Suggested packages:
  make-doc
The following NEW packages will be installed:
  make
0 upgraded, 1 newly installed, 0 to remove and 11 not upgraded.
Need to get 162 kB of archives.
After this operation, 393 kB of additional disk space will be used.
Get:1 http://ap-southeast-1.ec2.archive.ubuntu.com/ubuntu focal/main amd64 make amd64 4.2.1-1.2 [162 kB]
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Fetched 162 kB in 0s (6353 kB/s)
Selecting previously unselected package make.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 60548 files and directories currently installed.)
Preparing to unpack .../make_4.2.1-1.2_amd64.deb ...
Unpacking make (4.2.1-1.2) ...
Setting up make (4.2.1-1.2) ...
Processing triggers for man-db (2.9.1-1) ...
Cloning into 'kubernetes-ingress'...
Note: switching to 'v1.11.3'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at af30f695 Release 1.11.3
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
Docker version 20.10.7, build f0df350
docker build --build-arg IC_VERSION=1.11.3-af30f695 --build-arg GIT_COMMIT=af30f695 --build-arg VERSION=1.11.3 --target container -f build/Dockerfile -t gjwdyk/nginx-ingress:1.11.3 . --build-arg BUILD_OS=debian-plus --build-arg PLUS=-plus --secret id=nginx-repo.crt,src=nginx-repo.crt --secret id=nginx-repo.key,src=nginx-repo.key
#1 [internal] load build definition from Dockerfile
#1 sha256:2db82d33ad2bec9d3d9fbdeccfa6a0311fea9fc4a2e7d5a83f3009cfdbacd2bc
#1 transferring dockerfile: 14.82kB done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 sha256:2625a9bc663e1f566255145b169fb87382fd278af6f817b052515876ac8a6005
#2 transferring context: 64B done
#2 DONE 0.0s

#3 resolve image config for docker.io/docker/dockerfile:1.0-experimental
#3 sha256:74c2b22e535000215e4c6e91e97eaf031c745b5077d1b004e21d261b62c88704
#3 ...

#4 [auth] docker/dockerfile:pull token for registry-1.docker.io
#4 sha256:d4b8bf7e59e1101b33ecaef538beaf5ea60d35effc9ec3ba5d89bd9b99f9bd72
#4 DONE 0.0s

#3 resolve image config for docker.io/docker/dockerfile:1.0-experimental
#3 sha256:74c2b22e535000215e4c6e91e97eaf031c745b5077d1b004e21d261b62c88704
#3 DONE 2.9s

#5 docker-image://docker.io/docker/dockerfile:1.0-experimental@sha256:cbd6491240cc8894d25e366ba83da19df1187f975dc3a5c2f88ce888ca696174
#5 sha256:0af8e2916ef66f474d25fbdacb8b917690b037530afe0cb2062890ef568528e9
#5 resolve docker.io/docker/dockerfile:1.0-experimental@sha256:cbd6491240cc8894d25e366ba83da19df1187f975dc3a5c2f88ce888ca696174 done
#5 sha256:45169296fe16c4be3e75f43e6276e8adc60ea9e0aad0910264f6e0681e9e55b2 0B / 7.65MB 0.1s
#5 sha256:cbd6491240cc8894d25e366ba83da19df1187f975dc3a5c2f88ce888ca696174 2.03kB / 2.03kB done
#5 sha256:9f37bbf3e89214574a30356139381d312e2a8d80877a312d31a1446eb2bdfa4a 527B / 527B done
#5 sha256:70387ff0e5d2bb01c76837530c63b7a5e0c74fd054665da9e0611f176d456c21 811B / 811B done
#5 sha256:45169296fe16c4be3e75f43e6276e8adc60ea9e0aad0910264f6e0681e9e55b2 3.72MB / 7.65MB 0.3s
#5 extracting sha256:45169296fe16c4be3e75f43e6276e8adc60ea9e0aad0910264f6e0681e9e55b2
#5 sha256:45169296fe16c4be3e75f43e6276e8adc60ea9e0aad0910264f6e0681e9e55b2 7.65MB / 7.65MB 0.4s done
#5 extracting sha256:45169296fe16c4be3e75f43e6276e8adc60ea9e0aad0910264f6e0681e9e55b2 0.4s done
#5 DONE 0.8s

#6 [internal] load .dockerignore
#6 sha256:11dff71ac6a89de7b8290ec4c0c764874412ebd0f1daa26b6b60afb040c55b21
#6 DONE 0.0s

#7 [internal] load build definition from Dockerfile
#7 sha256:b3b741736aa60ee50ff67ec409e12bd71813a2f8a756e1479747d2f652614cd2
#7 transferring dockerfile: 14.82kB done
#7 DONE 0.0s

#9 [internal] load metadata for docker.io/library/debian:buster-slim
#9 sha256:9eff6dca560982b2e63ff856e62cbe563510aefae21ffbf5035ede9ce6b0ad90
#9 ...

#10 [auth] library/golang:pull token for registry-1.docker.io
#10 sha256:c2b507fe577718397fa37e18ecd10ecabbddbadba5930b952b3f391317f71c90
#10 DONE 0.0s

#11 [auth] library/debian:pull token for registry-1.docker.io
#11 sha256:9a27468dea02d1c16bde4209c53b5a8ece7d76f3fded999830edb88f5afcb2b0
#11 DONE 0.0s

#8 [internal] load metadata for docker.io/library/golang:1.16-alpine
#8 sha256:8b63da5e018f0854e06e7ef30abb4b1f70e2a4498e97a24af82c7d09918a0160
#8 DONE 2.2s

#9 [internal] load metadata for docker.io/library/debian:buster-slim
#9 sha256:9eff6dca560982b2e63ff856e62cbe563510aefae21ffbf5035ede9ce6b0ad90
#9 DONE 2.4s

#19 [builder 1/3] FROM docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f
#19 sha256:42270bf59891055360ca6ca760efadedf67ee6abdc1ca53cebde4e43c0dee859
#19 resolve docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f 0.0s done
#19 sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f 1.65kB / 1.65kB done
#19 sha256:c8cbfe53dae2363fa89a7359bdf2d2e7a82239ea36fe8ea5444cc365983331e6 1.36kB / 1.36kB done
#19 sha256:a84d737792c204952919619019cd3b204359cf53ea7b918e5eb99be9a03929b1 5.16kB / 5.16kB done
#19 sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 0B / 2.81MB 0.1s
#19 sha256:adcc1eea9eeabb6de296adb3e0c1b0722cf13251ff3e4e2d0a5f7ed8e3d48342 0B / 281.27kB 0.1s
#19 sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 1.05MB / 2.81MB 0.4s
#19 sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 2.81MB / 2.81MB 0.5s done
#19 extracting sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba
#19 sha256:adcc1eea9eeabb6de296adb3e0c1b0722cf13251ff3e4e2d0a5f7ed8e3d48342 281.27kB / 281.27kB 0.5s done
#19 sha256:4c4ab2625f07be8d5c6e48046a05ff3ecc7f374b794a926fb62247b66b511909 0B / 154B 0.6s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 0B / 106.14MB 0.6s
#19 sha256:4c4ab2625f07be8d5c6e48046a05ff3ecc7f374b794a926fb62247b66b511909 154B / 154B 0.8s done
#19 ...

#23 [auth] docker/dockerfile-copy:pull token for registry-1.docker.io
#23 sha256:23af71d9b4fcbb497fddfccc1619eade49b544aadadca24612ee776a1e4dedc3
#23 DONE 0.0s

#19 [builder 1/3] FROM docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f
#19 sha256:42270bf59891055360ca6ca760efadedf67ee6abdc1ca53cebde4e43c0dee859
#19 sha256:b52c85161d43b0fdd8bb3ae8fdf77b9e4fc783bceb11f591ed3bbdf1e4722abd 0B / 155B 0.9s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 6.29MB / 106.14MB 1.1s
#19 sha256:b52c85161d43b0fdd8bb3ae8fdf77b9e4fc783bceb11f591ed3bbdf1e4722abd 155B / 155B 1.1s done
#19 extracting sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 0.8s done
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 15.73MB / 106.14MB 1.3s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 24.12MB / 106.14MB 1.4s
#19 extracting sha256:adcc1eea9eeabb6de296adb3e0c1b0722cf13251ff3e4e2d0a5f7ed8e3d48342
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 37.75MB / 106.14MB 1.6s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 45.47MB / 106.14MB 1.8s
#19 extracting sha256:adcc1eea9eeabb6de296adb3e0c1b0722cf13251ff3e4e2d0a5f7ed8e3d48342 0.4s done
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 57.67MB / 106.14MB 2.0s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 63.82MB / 106.14MB 2.1s
#19 extracting sha256:4c4ab2625f07be8d5c6e48046a05ff3ecc7f374b794a926fb62247b66b511909 done
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 69.60MB / 106.14MB 2.2s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 87.03MB / 106.14MB 2.5s
#19 ...

#12 [internal] helper image for file operations
#12 sha256:e4c43493b1bb2320466c52248e886014710025b273f224bb96a23b8fb7a1d193
#12 resolve docker.io/docker/dockerfile-copy:v0.1.9@sha256:e8f159d3f00786604b93c675ee2783f8dc194bb565e61ca5788f6a6e9d304061 2.7s done
#12 DONE 2.7s

#19 [builder 1/3] FROM docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f
#19 sha256:42270bf59891055360ca6ca760efadedf67ee6abdc1ca53cebde4e43c0dee859
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 94.37MB / 106.14MB 2.6s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 100.32MB / 106.14MB 2.7s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 106.14MB / 106.14MB 2.8s
#19 sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 106.14MB / 106.14MB 3.1s done
#19 extracting sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b
#19 ...

#12 [internal] helper image for file operations
#12 sha256:e4c43493b1bb2320466c52248e886014710025b273f224bb96a23b8fb7a1d193
#12 sha256:e8f159d3f00786604b93c675ee2783f8dc194bb565e61ca5788f6a6e9d304061 2.03kB / 2.03kB done
#12 sha256:a546a4352bcaa6512f885d24fef3d9819e70551b98535ed1995e4b567ac6d05b 736B / 736B done
#12 sha256:494e63343c3f0d392e7af8d718979262baec9496a23e97ad110d62b9c90d6182 766B / 766B done
#12 sha256:df3b4bed1f63b36992540a09e0d10bd3f9d0b082d50810313841d745d7cce368 898.21kB / 898.21kB 0.7s done
#12 sha256:f7b6696c3fee7264ec4486cebe146a6a98aa8d1e46747843107ff473aada8d56 861.00kB / 861.00kB 0.6s done
#12 extracting sha256:df3b4bed1f63b36992540a09e0d10bd3f9d0b082d50810313841d745d7cce368 0.4s done
#12 extracting sha256:f7b6696c3fee7264ec4486cebe146a6a98aa8d1e46747843107ff473aada8d56 0.3s done
#12 DONE 1.8s

#19 [builder 1/3] FROM docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f
#19 sha256:42270bf59891055360ca6ca760efadedf67ee6abdc1ca53cebde4e43c0dee859
#19 ...

#15 [internal] load build context
#15 sha256:19437d91ca545e03d2f98797227229c590a50e44c892a4ee02c31bd1124edc26
#15 transferring context: 93.39MB 5.3s done
#15 DONE 5.4s

#19 [builder 1/3] FROM docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f
#19 sha256:42270bf59891055360ca6ca760efadedf67ee6abdc1ca53cebde4e43c0dee859
#19 ...

#13 [debian-plus 1/3] FROM docker.io/library/debian:buster-slim@sha256:f077cd32bfea6c4fa8ddeea05c53b27e90c7fad097e2011c9f5f11a8668f8db4
#13 sha256:82bea54769952f9834eda2ec3ee96969726ea1d29bdc7a946f519e19241b4ee8
#13 resolve docker.io/library/debian:buster-slim@sha256:f077cd32bfea6c4fa8ddeea05c53b27e90c7fad097e2011c9f5f11a8668f8db4 0.0s done
#13 sha256:80b9e7aadac5e58ef2d938f0b74e8d208e8e9d64cab77c357df7d75e0a8a56c4 1.46kB / 1.46kB done
#13 sha256:69692152171afee1fd341febc390747cfca2ff302f2881d8b394e786af605696 27.15MB / 27.15MB 1.6s done
#13 sha256:f077cd32bfea6c4fa8ddeea05c53b27e90c7fad097e2011c9f5f11a8668f8db4 1.85kB / 1.85kB done
#13 sha256:33965bf1eaadb19ce2f9396595c4a669e3e04c1ab8cc073b8929f529c58404bb 529B / 529B done
#13 extracting sha256:69692152171afee1fd341febc390747cfca2ff302f2881d8b394e786af605696 5.0s done
#13 DONE 7.2s

#19 [builder 1/3] FROM docker.io/library/golang:1.16-alpine@sha256:d312fd160b846cc88569468416d6786dc882cf78dc7157a66f6e3a72b05df06f
#19 sha256:42270bf59891055360ca6ca760efadedf67ee6abdc1ca53cebde4e43c0dee859
#19 extracting sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 5.1s
#19 extracting sha256:e25adedf14febf43281fc3b4750e8b0c50f2bb061ef8f5e16a829d3392fa447b 9.6s done
#19 extracting sha256:b52c85161d43b0fdd8bb3ae8fdf77b9e4fc783bceb11f591ed3bbdf1e4722abd done
#19 DONE 13.6s

#14 [debian-plus 2/3] RUN --mount=type=secret,id=nginx-repo.crt,dst=/etc/ssl/nginx/nginx-repo.crt,mode=0644 	--mount=type=secret,id=nginx-repo.key,dst=/etc/ssl/nginx/nginx-repo.key,mode=0644 	set -x 	&& apt-get update 	&& apt-get install --no-install-recommends --no-install-suggests -y ca-certificates gnupg wget 	&& wget https://nginx.org/keys/nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --import nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --export > /etc/apt/trusted.gpg.d/nginx_signing.gpg 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Peer "true";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Host "true";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslCert     "/etc/ssl/nginx/nginx-repo.crt";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslKey      "/etc/ssl/nginx/nginx-repo.key";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::User-Agent  "k8s-ic-1.11.3-af30f695-apt";" >> /etc/apt/apt.conf.d/90nginx 	&& printf "deb https://plus-pkgs.nginx.com/debian buster nginx-plus\n" > /etc/apt/sources.list.d/nginx-plus.list 	&& apt-get update && apt-get install --no-install-recommends --no-install-suggests -y 	apt-transport-https libcap2-bin nginx-plus=23-2~buster nginx-plus-module-njs=23+0.5.0-1~buster 	&& apt-get purge --auto-remove -y apt-transport-https gnupg wget 	&& rm -rf /var/lib/apt/lists/*
#14 sha256:b92c6da36c38b71878d90fb2ddbdcf59a64b840a942d414a0322ed479897ef13
#14 0.707 + apt-get update
#14 0.807 Get:1 http://security.debian.org/debian-security buster/updates InRelease [65.4 kB]
#14 0.813 Get:2 http://deb.debian.org/debian buster InRelease [121 kB]
#14 0.836 Get:3 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
#14 1.150 Get:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages [292 kB]
#14 1.526 Get:5 http://deb.debian.org/debian buster/main amd64 Packages [7907 kB]
#14 2.116 Get:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [10.9 kB]
#14 4.965 Fetched 8449 kB in 4s (2029 kB/s)
#14 4.965 Reading package lists...
#14 ...

#20 [builder 2/3] COPY . /go/src/github.com/nginxinc/kubernetes-ingress/nginx-ingress/
#20 sha256:3082fd84f8742d04d350af05f167c22be276a4fd231b1b949b1f407026175ef8
#20 DONE 1.6s

#21 [builder 3/3] RUN CGO_ENABLED=0 GOFLAGS='-mod=vendor' 	go build -installsuffix cgo -ldflags "-w -X main.version=1.11.3 -X main.gitCommit=af30f695" -o /nginx-ingress
#21 sha256:d56bd989d5555f01b621efad34d94a046a7591af0280b1b0b7c870b79169bd8c
#21 ...

#14 [debian-plus 2/3] RUN --mount=type=secret,id=nginx-repo.crt,dst=/etc/ssl/nginx/nginx-repo.crt,mode=0644 	--mount=type=secret,id=nginx-repo.key,dst=/etc/ssl/nginx/nginx-repo.key,mode=0644 	set -x 	&& apt-get update 	&& apt-get install --no-install-recommends --no-install-suggests -y ca-certificates gnupg wget 	&& wget https://nginx.org/keys/nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --import nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --export > /etc/apt/trusted.gpg.d/nginx_signing.gpg 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Peer "true";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Host "true";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslCert     "/etc/ssl/nginx/nginx-repo.crt";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslKey      "/etc/ssl/nginx/nginx-repo.key";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::User-Agent  "k8s-ic-1.11.3-af30f695-apt";" >> /etc/apt/apt.conf.d/90nginx 	&& printf "deb https://plus-pkgs.nginx.com/debian buster nginx-plus\n" > /etc/apt/sources.list.d/nginx-plus.list 	&& apt-get update && apt-get install --no-install-recommends --no-install-suggests -y 	apt-transport-https libcap2-bin nginx-plus=23-2~buster nginx-plus-module-njs=23+0.5.0-1~buster 	&& apt-get purge --auto-remove -y apt-transport-https gnupg wget 	&& rm -rf /var/lib/apt/lists/*
#14 sha256:b92c6da36c38b71878d90fb2ddbdcf59a64b840a942d414a0322ed479897ef13
#14 6.565 + apt-get install --no-install-recommends --no-install-suggests -y ca-certificates gnupg wget
#14 6.590 Reading package lists...
#14 7.806 Building dependency tree...
#14 8.007 Reading state information...
#14 8.376 The following additional packages will be installed:
#14 8.376   dirmngr gnupg-l10n gnupg-utils gpg gpg-agent gpg-wks-client gpg-wks-server
#14 8.377   gpgconf gpgsm libassuan0 libksba8 libldap-2.4-2 libldap-common libnpth0
#14 8.377   libpcre2-8-0 libpsl5 libreadline7 libsasl2-2 libsasl2-modules-db
#14 8.378   libsqlite3-0 libssl1.1 lsb-base openssl pinentry-curses readline-common
#14 8.380 Suggested packages:
#14 8.380   dbus-user-session libpam-systemd pinentry-gnome3 tor parcimonie xloadimage
#14 8.380   scdaemon pinentry-doc readline-doc
#14 8.380 Recommended packages:
#14 8.380   publicsuffix libsasl2-modules
#14 8.792 The following NEW packages will be installed:
#14 8.792   ca-certificates dirmngr gnupg gnupg-l10n gnupg-utils gpg gpg-agent
#14 8.793   gpg-wks-client gpg-wks-server gpgconf gpgsm libassuan0 libksba8
#14 8.793   libldap-2.4-2 libldap-common libnpth0 libpcre2-8-0 libpsl5 libreadline7
#14 8.794   libsasl2-2 libsasl2-modules-db libsqlite3-0 libssl1.1 lsb-base openssl
#14 8.794   pinentry-curses readline-common wget
#14 8.852 0 upgraded, 28 newly installed, 0 to remove and 1 not upgraded.
#14 8.852 Need to get 12.2 MB of archives.
#14 8.852 After this operation, 27.8 MB of additional disk space will be used.
#14 8.852 Get:1 http://security.debian.org/debian-security buster/updates/main amd64 libssl1.1 amd64 1.1.1d-0+deb10u6 [1539 kB]
#14 8.852 Get:2 http://deb.debian.org/debian buster/main amd64 readline-common all 7.0-5 [70.6 kB]
#14 8.859 Get:3 http://deb.debian.org/debian buster/main amd64 libpcre2-8-0 amd64 10.32-5 [213 kB]
#14 8.874 Get:4 http://deb.debian.org/debian buster/main amd64 libpsl5 amd64 0.20.2-2 [53.7 kB]
#14 8.876 Get:5 http://deb.debian.org/debian buster/main amd64 wget amd64 1.20.1-1.1 [902 kB]
#14 8.912 Get:6 http://deb.debian.org/debian buster/main amd64 ca-certificates all 20200601~deb10u2 [166 kB]
#14 8.916 Get:7 http://deb.debian.org/debian buster/main amd64 libassuan0 amd64 2.5.2-1 [49.4 kB]
#14 8.918 Get:8 http://deb.debian.org/debian buster/main amd64 libreadline7 amd64 7.0-5 [151 kB]
#14 8.923 Get:9 http://security.debian.org/debian-security buster/updates/main amd64 openssl amd64 1.1.1d-0+deb10u6 [844 kB]
#14 8.927 Get:10 http://deb.debian.org/debian buster/main amd64 gpgconf amd64 2.2.12-1+deb10u1 [510 kB]
#14 8.949 Get:11 http://deb.debian.org/debian buster/main amd64 lsb-base all 10.2019051400 [28.4 kB]
#14 8.952 Get:12 http://deb.debian.org/debian buster/main amd64 libksba8 amd64 1.3.5-2 [99.7 kB]
#14 8.957 Get:13 http://deb.debian.org/debian buster/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-1+deb10u1 [69.1 kB]
#14 8.959 Get:14 http://deb.debian.org/debian buster/main amd64 libsasl2-2 amd64 2.1.27+dfsg-1+deb10u1 [106 kB]
#14 8.963 Get:15 http://deb.debian.org/debian buster/main amd64 libldap-common all 2.4.47+dfsg-3+deb10u6 [90.0 kB]
#14 8.966 Get:16 http://deb.debian.org/debian buster/main amd64 libldap-2.4-2 amd64 2.4.47+dfsg-3+deb10u6 [224 kB]
#14 8.971 Get:17 http://deb.debian.org/debian buster/main amd64 libnpth0 amd64 1.6-1 [18.4 kB]
#14 8.973 Get:18 http://deb.debian.org/debian buster/main amd64 dirmngr amd64 2.2.12-1+deb10u1 [712 kB]
#14 8.988 Get:19 http://deb.debian.org/debian buster/main amd64 gnupg-l10n all 2.2.12-1+deb10u1 [1010 kB]
#14 9.007 Get:20 http://deb.debian.org/debian buster/main amd64 gnupg-utils amd64 2.2.12-1+deb10u1 [861 kB]
#14 9.025 Get:21 http://deb.debian.org/debian buster/main amd64 libsqlite3-0 amd64 3.27.2-3+deb10u1 [641 kB]
#14 9.038 Get:22 http://deb.debian.org/debian buster/main amd64 gpg amd64 2.2.12-1+deb10u1 [865 kB]
#14 9.056 Get:23 http://deb.debian.org/debian buster/main amd64 pinentry-curses amd64 1.1.0-2 [64.5 kB]
#14 9.058 Get:24 http://deb.debian.org/debian buster/main amd64 gpg-agent amd64 2.2.12-1+deb10u1 [617 kB]
#14 9.071 Get:25 http://deb.debian.org/debian buster/main amd64 gpg-wks-client amd64 2.2.12-1+deb10u1 [485 kB]
#14 9.082 Get:26 http://deb.debian.org/debian buster/main amd64 gpg-wks-server amd64 2.2.12-1+deb10u1 [478 kB]
#14 9.092 Get:27 http://deb.debian.org/debian buster/main amd64 gpgsm amd64 2.2.12-1+deb10u1 [604 kB]
#14 9.104 Get:28 http://deb.debian.org/debian buster/main amd64 gnupg all 2.2.12-1+deb10u1 [715 kB]
#14 9.352 debconf: delaying package configuration, since apt-utils is not installed
#14 9.383 Fetched 12.2 MB in 0s (44.0 MB/s)
#14 9.431 Selecting previously unselected package libssl1.1:amd64.
#14 9.432 (Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 6460 files and directories currently installed.)
#14 9.449 Preparing to unpack .../00-libssl1.1_1.1.1d-0+deb10u6_amd64.deb ...
#14 9.457 Unpacking libssl1.1:amd64 (1.1.1d-0+deb10u6) ...
#14 9.739 Selecting previously unselected package readline-common.
#14 9.739 Preparing to unpack .../01-readline-common_7.0-5_all.deb ...
#14 9.743 Unpacking readline-common (7.0-5) ...
#14 9.798 Selecting previously unselected package libpcre2-8-0:amd64.
#14 9.798 Preparing to unpack .../02-libpcre2-8-0_10.32-5_amd64.deb ...
#14 9.803 Unpacking libpcre2-8-0:amd64 (10.32-5) ...
#14 9.890 Selecting previously unselected package libpsl5:amd64.
#14 9.890 Preparing to unpack .../03-libpsl5_0.20.2-2_amd64.deb ...
#14 9.896 Unpacking libpsl5:amd64 (0.20.2-2) ...
#14 9.938 Selecting previously unselected package wget.
#14 9.939 Preparing to unpack .../04-wget_1.20.1-1.1_amd64.deb ...
#14 9.944 Unpacking wget (1.20.1-1.1) ...
#14 10.13 Selecting previously unselected package openssl.
#14 10.13 Preparing to unpack .../05-openssl_1.1.1d-0+deb10u6_amd64.deb ...
#14 10.13 Unpacking openssl (1.1.1d-0+deb10u6) ...
#14 10.34 Selecting previously unselected package ca-certificates.
#14 10.34 Preparing to unpack .../06-ca-certificates_20200601~deb10u2_all.deb ...
#14 10.35 Unpacking ca-certificates (20200601~deb10u2) ...
#14 10.46 Selecting previously unselected package libassuan0:amd64.
#14 10.46 Preparing to unpack .../07-libassuan0_2.5.2-1_amd64.deb ...
#14 10.47 Unpacking libassuan0:amd64 (2.5.2-1) ...
#14 10.52 Selecting previously unselected package libreadline7:amd64.
#14 10.52 Preparing to unpack .../08-libreadline7_7.0-5_amd64.deb ...
#14 10.52 Unpacking libreadline7:amd64 (7.0-5) ...
#14 10.58 Selecting previously unselected package gpgconf.
#14 10.59 Preparing to unpack .../09-gpgconf_2.2.12-1+deb10u1_amd64.deb ...
#14 10.59 Unpacking gpgconf (2.2.12-1+deb10u1) ...
#14 10.66 Selecting previously unselected package lsb-base.
#14 10.66 Preparing to unpack .../10-lsb-base_10.2019051400_all.deb ...
#14 10.67 Unpacking lsb-base (10.2019051400) ...
#14 10.71 Selecting previously unselected package libksba8:amd64.
#14 10.71 Preparing to unpack .../11-libksba8_1.3.5-2_amd64.deb ...
#14 10.72 Unpacking libksba8:amd64 (1.3.5-2) ...
#14 10.79 Selecting previously unselected package libsasl2-modules-db:amd64.
#14 10.79 Preparing to unpack .../12-libsasl2-modules-db_2.1.27+dfsg-1+deb10u1_amd64.deb ...
#14 10.80 Unpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u1) ...
#14 10.85 Selecting previously unselected package libsasl2-2:amd64.
#14 10.86 Preparing to unpack .../13-libsasl2-2_2.1.27+dfsg-1+deb10u1_amd64.deb ...
#14 10.86 Unpacking libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u1) ...
#14 10.92 Selecting previously unselected package libldap-common.
#14 10.92 Preparing to unpack .../14-libldap-common_2.4.47+dfsg-3+deb10u6_all.deb ...
#14 10.92 Unpacking libldap-common (2.4.47+dfsg-3+deb10u6) ...
#14 10.98 Selecting previously unselected package libldap-2.4-2:amd64.
#14 10.98 Preparing to unpack .../15-libldap-2.4-2_2.4.47+dfsg-3+deb10u6_amd64.deb ...
#14 10.99 Unpacking libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u6) ...
#14 11.08 Selecting previously unselected package libnpth0:amd64.
#14 11.08 Preparing to unpack .../16-libnpth0_1.6-1_amd64.deb ...
#14 11.09 Unpacking libnpth0:amd64 (1.6-1) ...
#14 11.13 Selecting previously unselected package dirmngr.
#14 11.13 Preparing to unpack .../17-dirmngr_2.2.12-1+deb10u1_amd64.deb ...
#14 11.15 Unpacking dirmngr (2.2.12-1+deb10u1) ...
#14 11.27 Selecting previously unselected package gnupg-l10n.
#14 11.27 Preparing to unpack .../18-gnupg-l10n_2.2.12-1+deb10u1_all.deb ...
#14 11.27 Unpacking gnupg-l10n (2.2.12-1+deb10u1) ...
#14 11.51 Selecting previously unselected package gnupg-utils.
#14 11.51 Preparing to unpack .../19-gnupg-utils_2.2.12-1+deb10u1_amd64.deb ...
#14 11.52 Unpacking gnupg-utils (2.2.12-1+deb10u1) ...
#14 11.73 Selecting previously unselected package libsqlite3-0:amd64.
#14 11.73 Preparing to unpack .../20-libsqlite3-0_3.27.2-3+deb10u1_amd64.deb ...
#14 11.73 Unpacking libsqlite3-0:amd64 (3.27.2-3+deb10u1) ...
#14 11.87 Selecting previously unselected package gpg.
#14 11.87 Preparing to unpack .../21-gpg_2.2.12-1+deb10u1_amd64.deb ...
#14 11.87 Unpacking gpg (2.2.12-1+deb10u1) ...
#14 12.01 Selecting previously unselected package pinentry-curses.
#14 12.01 Preparing to unpack .../22-pinentry-curses_1.1.0-2_amd64.deb ...
#14 12.02 Unpacking pinentry-curses (1.1.0-2) ...
#14 12.07 Selecting previously unselected package gpg-agent.
#14 12.07 Preparing to unpack .../23-gpg-agent_2.2.12-1+deb10u1_amd64.deb ...
#14 12.08 Unpacking gpg-agent (2.2.12-1+deb10u1) ...
#14 12.19 Selecting previously unselected package gpg-wks-client.
#14 12.19 Preparing to unpack .../24-gpg-wks-client_2.2.12-1+deb10u1_amd64.deb ...
#14 12.19 Unpacking gpg-wks-client (2.2.12-1+deb10u1) ...
#14 12.28 Selecting previously unselected package gpg-wks-server.
#14 12.28 Preparing to unpack .../25-gpg-wks-server_2.2.12-1+deb10u1_amd64.deb ...
#14 12.29 Unpacking gpg-wks-server (2.2.12-1+deb10u1) ...
#14 12.37 Selecting previously unselected package gpgsm.
#14 12.37 Preparing to unpack .../26-gpgsm_2.2.12-1+deb10u1_amd64.deb ...
#14 12.37 Unpacking gpgsm (2.2.12-1+deb10u1) ...
#14 12.48 Selecting previously unselected package gnupg.
#14 12.48 Preparing to unpack .../27-gnupg_2.2.12-1+deb10u1_all.deb ...
#14 12.48 Unpacking gnupg (2.2.12-1+deb10u1) ...
#14 12.65 Setting up libksba8:amd64 (1.3.5-2) ...
#14 12.67 Setting up lsb-base (10.2019051400) ...
#14 12.68 Setting up libpsl5:amd64 (0.20.2-2) ...
#14 12.69 Setting up libssl1.1:amd64 (1.1.1d-0+deb10u6) ...
#14 12.85 debconf: unable to initialize frontend: Dialog
#14 12.85 debconf: (TERM is not set, so the dialog frontend is not usable.)
#14 12.85 debconf: falling back to frontend: Readline
#14 12.85 debconf: unable to initialize frontend: Readline
#14 12.85 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
#14 12.85 debconf: falling back to frontend: Teletype
#14 12.90 Setting up libsqlite3-0:amd64 (3.27.2-3+deb10u1) ...
#14 12.91 Setting up libnpth0:amd64 (1.6-1) ...
#14 12.92 Setting up libassuan0:amd64 (2.5.2-1) ...
#14 12.93 Setting up libldap-common (2.4.47+dfsg-3+deb10u6) ...
#14 12.95 Setting up libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u1) ...
#14 12.96 Setting up gnupg-l10n (2.2.12-1+deb10u1) ...
#14 12.97 Setting up libpcre2-8-0:amd64 (10.32-5) ...
#14 12.98 Setting up libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u1) ...
#14 12.99 Setting up openssl (1.1.1d-0+deb10u6) ...
#14 13.01 Setting up readline-common (7.0-5) ...
#14 13.02 Setting up libreadline7:amd64 (7.0-5) ...
#14 13.03 Setting up gnupg-utils (2.2.12-1+deb10u1) ...
#14 13.04 Setting up pinentry-curses (1.1.0-2) ...
#14 13.06 Setting up wget (1.20.1-1.1) ...
#14 13.07 Setting up libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u6) ...
#14 13.08 Setting up ca-certificates (20200601~deb10u2) ...
#14 13.59 debconf: unable to initialize frontend: Dialog
#14 13.59 debconf: (TERM is not set, so the dialog frontend is not usable.)
#14 13.59 debconf: falling back to frontend: Readline
#14 13.59 debconf: unable to initialize frontend: Readline
#14 13.59 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
#14 13.59 debconf: falling back to frontend: Teletype
#14 14.31 Updating certificates in /etc/ssl/certs...
#14 15.35 137 added, 0 removed; done.
#14 15.39 Setting up gpgconf (2.2.12-1+deb10u1) ...
#14 15.40 Setting up gpg (2.2.12-1+deb10u1) ...
#14 15.41 Setting up gpg-agent (2.2.12-1+deb10u1) ...
#14 15.43 Setting up gpgsm (2.2.12-1+deb10u1) ...
#14 15.44 Setting up dirmngr (2.2.12-1+deb10u1) ...
#14 15.47 Setting up gpg-wks-server (2.2.12-1+deb10u1) ...
#14 15.48 Setting up gpg-wks-client (2.2.12-1+deb10u1) ...
#14 15.49 Setting up gnupg (2.2.12-1+deb10u1) ...
#14 15.51 Processing triggers for libc-bin (2.28-10) ...
#14 15.53 Processing triggers for ca-certificates (20200601~deb10u2) ...
#14 15.54 Updating certificates in /etc/ssl/certs...
#14 16.41 0 added, 0 removed; done.
#14 16.42 Running hooks in /etc/ca-certificates/update.d...
#14 16.42 done.
#14 16.45 + wget https://nginx.org/keys/nginx_signing.key
#14 16.46 --2021-06-15 04:09:48--  https://nginx.org/keys/nginx_signing.key
#14 16.48 Resolving nginx.org (nginx.org)... 3.125.197.172, 52.58.199.22, 2a05:d014:edb:5702::6, ...
#14 16.70 Connecting to nginx.org (nginx.org)|3.125.197.172|:443... connected.
#14 17.23 HTTP request sent, awaiting response... 200 OK
#14 17.40 Length: 1561 (1.5K) [application/octet-stream]
#14 17.40 Saving to: 'nginx_signing.key'
#14 17.40 
#14 17.40      0K .                                                     100% 39.5M=0s
#14 17.40 
#14 17.40 2021-06-15 04:09:49 (39.5 MB/s) - 'nginx_signing.key' saved [1561/1561]
#14 17.40 
#14 17.40 + gpg --no-default-keyring --keyring nginx_keyring.gpg --import nginx_signing.key
#14 17.40 gpg: directory '/root/.gnupg' created
#14 17.40 gpg: keybox '/root/.gnupg/nginx_keyring.gpg' created
#14 17.41 gpg: key ABF5BD827BD9BF62: 3 signatures not checked due to missing keys
#14 17.41 gpg: /root/.gnupg/trustdb.gpg: trustdb created
#14 17.41 gpg: key ABF5BD827BD9BF62: public key "nginx signing key <signing-key@nginx.com>" imported
#14 17.42 gpg: Total number processed: 1
#14 17.42 gpg:               imported: 1
#14 17.42 gpg: no ultimately trusted keys found
#14 17.42 + gpg --no-default-keyring --keyring nginx_keyring.gpg --export
#14 17.43 + echo Acquire::https::plus-pkgs.nginx.com::Verify-Peer "true";
#14 17.43 + echo Acquire::https::plus-pkgs.nginx.com::Verify-Host "true";
#14 17.43 + echo Acquire::https::plus-pkgs.nginx.com::SslCert     "/etc/ssl/nginx/nginx-repo.crt";
#14 17.43 + echo Acquire::https::plus-pkgs.nginx.com::SslKey      "/etc/ssl/nginx/nginx-repo.key";
#14 17.43 + echo Acquire::https::plus-pkgs.nginx.com::User-Agent  "k8s-ic-1.11.3-af30f695-apt";
#14 17.43 + printf deb https://plus-pkgs.nginx.com/debian buster nginx-plus\n
#14 17.43 + apt-get update
#14 17.58 Hit:1 http://deb.debian.org/debian buster InRelease
#14 17.58 Hit:2 http://deb.debian.org/debian buster-updates InRelease
#14 17.58 Hit:3 http://security.debian.org/debian-security buster/updates InRelease
#14 18.43 Err:4 https://plus-pkgs.nginx.com/debian buster InRelease
#14 18.43   400  Bad Request [IP: 52.59.52.27 443]
#14 18.44 Reading package lists...
#14 19.72 E: Failed to fetch https://plus-pkgs.nginx.com/debian/dists/buster/InRelease  400  Bad Request [IP: 52.59.52.27 443]
#14 19.72 E: The repository 'https://plus-pkgs.nginx.com/debian buster InRelease' is not signed.
#14 ERROR: executor failed running [/bin/sh -c set -x 	&& apt-get update 	&& apt-get install --no-install-recommends --no-install-suggests -y ca-certificates gnupg wget 	&& wget https://nginx.org/keys/nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --import nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --export > /etc/apt/trusted.gpg.d/nginx_signing.gpg 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Peer \"true\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Host \"true\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslCert     \"/etc/ssl/nginx/nginx-repo.crt\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslKey      \"/etc/ssl/nginx/nginx-repo.key\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::User-Agent  \"k8s-ic-$IC_VERSION-apt\";" >> /etc/apt/apt.conf.d/90nginx 	&& printf "deb https://plus-pkgs.nginx.com/debian buster nginx-plus\n" > /etc/apt/sources.list.d/nginx-plus.list 	&& apt-get update && apt-get install --no-install-recommends --no-install-suggests -y 	apt-transport-https libcap2-bin nginx-plus=${NGINX_PLUS_VERSION} nginx-plus-module-njs=${NGINX_NJS_VERSION} 	&& apt-get purge --auto-remove -y apt-transport-https gnupg wget 	&& rm -rf /var/lib/apt/lists/*]: exit code: 100

#21 [builder 3/3] RUN CGO_ENABLED=0 GOFLAGS='-mod=vendor' 	go build -installsuffix cgo -ldflags "-w -X main.version=1.11.3 -X main.gitCommit=af30f695" -o /nginx-ingress
#21 sha256:d56bd989d5555f01b621efad34d94a046a7591af0280b1b0b7c870b79169bd8c
#21 CANCELED
------
 > [debian-plus 2/3] RUN --mount=type=secret,id=nginx-repo.crt,dst=/etc/ssl/nginx/nginx-repo.crt,mode=0644 	--mount=type=secret,id=nginx-repo.key,dst=/etc/ssl/nginx/nginx-repo.key,mode=0644 	set -x 	&& apt-get update 	&& apt-get install --no-install-recommends --no-install-suggests -y ca-certificates gnupg wget 	&& wget https://nginx.org/keys/nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --import nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --export > /etc/apt/trusted.gpg.d/nginx_signing.gpg 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Peer "true";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Host "true";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslCert     "/etc/ssl/nginx/nginx-repo.crt";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslKey      "/etc/ssl/nginx/nginx-repo.key";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::User-Agent  "k8s-ic-1.11.3-af30f695-apt";" >> /etc/apt/apt.conf.d/90nginx 	&& printf "deb https://plus-pkgs.nginx.com/debian buster nginx-plus\n" > /etc/apt/sources.list.d/nginx-plus.list 	&& apt-get update && apt-get install --no-install-recommends --no-install-suggests -y 	apt-transport-https libcap2-bin nginx-plus=23-2~buster nginx-plus-module-njs=23+0.5.0-1~buster 	&& apt-get purge --auto-remove -y apt-transport-https gnupg wget 	&& rm -rf /var/lib/apt/lists/*:
------
executor failed running [/bin/sh -c set -x 	&& apt-get update 	&& apt-get install --no-install-recommends --no-install-suggests -y ca-certificates gnupg wget 	&& wget https://nginx.org/keys/nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --import nginx_signing.key 	&& gpg --no-default-keyring --keyring nginx_keyring.gpg --export > /etc/apt/trusted.gpg.d/nginx_signing.gpg 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Peer \"true\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::Verify-Host \"true\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslCert     \"/etc/ssl/nginx/nginx-repo.crt\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::SslKey      \"/etc/ssl/nginx/nginx-repo.key\";" >> /etc/apt/apt.conf.d/90nginx 	&& echo "Acquire::https::plus-pkgs.nginx.com::User-Agent  \"k8s-ic-$IC_VERSION-apt\";" >> /etc/apt/apt.conf.d/90nginx 	&& printf "deb https://plus-pkgs.nginx.com/debian buster nginx-plus\n" > /etc/apt/sources.list.d/nginx-plus.list 	&& apt-get update && apt-get install --no-install-recommends --no-install-suggests -y 	apt-transport-https libcap2-bin nginx-plus=${NGINX_PLUS_VERSION} nginx-plus-module-njs=${NGINX_NJS_VERSION} 	&& apt-get purge --auto-remove -y apt-transport-https gnupg wget 	&& rm -rf /var/lib/apt/lists/*]: exit code: 100
make: *** [Makefile:67: debian-image-plus] Error 1
docker push gjwdyk/nginx-ingress:1.11.3
The push refers to repository [docker.io/gjwdyk/nginx-ingress]
An image does not exist locally with the tag: gjwdyk/nginx-ingress
make: *** [Makefile:98: push] Error 1
Cloud-init v. 21.1-19-gbad84ad4-0ubuntu1~20.04.2 running 'modules:final' at Tue, 15 Jun 2021 04:01:48 +0000. Up 19.24 seconds.
2021-06-15 04:09:52,874 - cc_scripts_user.py[WARNING]: Failed to run module scripts-user (scripts in /var/lib/cloud/instance/scripts)
2021-06-15 04:09:52,876 - util.py[WARNING]: Running module scripts-user (<module 'cloudinit.config.cc_scripts_user' from '/usr/lib/python3/dist-packages/cloudinit/config/cc_scripts_user.py'>) failed
Cloud-init v. 21.1-19-gbad84ad4-0ubuntu1~20.04.2 finished at Tue, 15 Jun 2021 04:09:52 +0000. Datasource DataSourceEc2Local.  Up 503.25 seconds
